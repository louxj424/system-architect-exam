# 2025年下半年系统架构师考试-案例分析真题（回忆版）
> 写在前面：一共5道题，每道题满分25分，要求5选3，总分75分。本文尽量将图片内容抽取为文字版；仅当图片为不可替代的关键示意图时保留。

## 第一题：质量属性与场景分析（必做题）
### 题目背景
- 电动车充电系统设计，要求满足弱网环境、扩展性、安全性与可维护性等综合约束。

### 题干要点
- a. 系统开始充电后，要在3秒内响应
- b. 附近两百米有超过多少个设备在充电还是有充电口，CPU使用率不超过40%
- c. 如果要集成新的 API，需要在10个工作日内完成
- d. 当系统发生故障时，故障恢复时间不超过五分钟
- e. 系统要能模拟雷电、下雨、冰雪等恶劣天气下的充电场景
- f. 支持远程调用测试
- g. 使用 AES-256 对用户敏感信息（位置、账号密码）进行加密
- h. 支持多语言、多模式与无障碍标准（易用性）
- i. 支持运维人员在两小时内手动快速替换模块，无需开发介入
- j. 用户在若干秒内可上手使用（易用性）
- k. 支持在不同分辨率设备上打开系统
- l. [未知内容]
- m. [未知内容]
- n. 手机没网时进入安全模式，系统显示上一次的记录

### 问题
- 问题1：将上述场景与质量属性匹配。

 质量属性匹配表（请在“对应场景”列填写 a–n 的场景编号）：

 | 序号 | 质量属性 | 对应场景 |
 |------|----------|-----------|
 | (1)  | 可用性   |           |
 | (2)  | 安全性   |           |
 | (3)  | 性能     |           |
 | (4)  | 可修改性 |           |
 | (5)  | 可测试性 |           |
 | (6)  | 易用性   |           |


- 问题2：质量属性场景包含哪6部分？“可集成新 API”与“故障恢复≤5分钟”分别属于哪两部分？
- 问题3：敏感数据长度可能超长，而 AES-256 为固定 16 字节分组，超长数据如何处理？

### 参考答案
 - 问题1：质量属性与场景匹配
   | 序号 | 质量属性 | 对应场景 |
   |------|----------|-----------|
   | (1)  | 可用性   | d、n      |
   | (2)  | 安全性   | g         |
   | (3)  | 性能     | a、b      |
   | (4)  | 可修改性 | c、i      |
   | (5)  | 可测试性 | e、f      |
   | (6)  | 易用性   | h、j      |

 - 问题2：质量属性场景的 6 部分
   - a) 刺激源，b) 刺激，c) 环境，d) 制品（工件/系统），e) 响应，f) 响应度量
   - 归属：可集成新 API 属于“刺激”；故障恢复时间不超过五分钟属于“响应度量”。

 - 问题3：AES-256 超长数据处理
   - 先拆分为 16 字节一块，不足则填充；按分组模式逐块加密；最后将所有加密块组合成密文。


## 第二题：云-端协同餐饮系统与DDD（选做题）
### 题目背景
- 端侧：点菜、下单、加菜、退菜、结算；桌台管理与服务员操作；弱网下保持本地可用性与业务连续性。
- 云侧：菜品基础信息管理；订单管理（汇总统计、对账、报表）；餐厅菜品与配置；员工账号与权限；多门店统一运营与数据整合。
- 要求基于 DDD 进行领域划分与架构设计。

### 问题
- 问题1：什么是限界上下文（Bounded Context），作用是什么？
- 问题2：补充点菜层次图（文本表达）：从表示层到数据与安全的分层要素。
- 问题3：点单在网络欠佳下可能遇到哪些问题，以及对应措施？

### 参考答案
- 限界上下文定义与作用：
  - 定义：DDD 中用于划分领域范围的“语义边界”。边界内模型概念与数据含义一致，边界外可使用不同模型或含义。
  - 作用：
    - 消除领域概念歧义，保证上下文内模型一致性。
    - 降低复杂度，将大系统拆成若干独立领域模块。
    - 支持团队并行开发，各上下文独立演进与部署。
    - 隔离变化与耦合，通过明确的集成模式通信。
    - 为微服务拆分提供依据（一个上下文常对应一个服务）。
- 点菜层次（文本版示意，原图7要素）：
  - 表示层：`iOS`、`Android`、Web（`HTML`/`CSS`/`JavaScript`）
  - 交互与网络：`Ajax`、`HTTP`、`Ktor`
  - 安全：`Spring Security`
  - 业务层：点菜、菜单管理、员工管理等领域服务
  - 服务层：统一代理能力、通用服务能力
  - 数据与持久化：`SQLite`、`Redis` 等
  - 设备层：与店内设备集成（打印、扫码、PAD 等）
- 弱网问题与措施（原图8）：
  - 问题：下单失败、数据不同步、订单丢失、冲突与覆盖。
  - 措施：边云协同、端侧本地缓存与持久化、本地队列与重试、数据版本控制、哈希校验与增量同步；确保弱网/断网下可靠点单与结算，网络恢复后最终一致。

## 第三题：Redis 缓存穿透与过期策略（选做题）
### 问题背景
- 问题1：基于互斥锁的缓存实现方案，查询过程如何设计？
- 问题2：逻辑过期（非互斥锁）方案，查询过程如何设计（可返回过期数据）？
- 问题3：两种方法的优劣，并在高可用诉求下给出选择建议。

### 参考答案
- 互斥锁方案（查询过程）：
  - 命中缓存→直接返回；未命中→尝试获取互斥锁。
  - 获取锁成功→查询数据库→回填缓存并设置过期时间→释放锁→返回数据。
  - 获取锁失败→短暂等待或快速失败（返回空/默认值/降级），避免大量并发打爆数据库。
- 逻辑过期方案（查询过程）：
  - 命中缓存但逻辑时间未过期→直接返回。
  - 命中缓存但逻辑时间过期→返回“过期数据”以保障可用性，同时后台异步重建缓存：获取互斥锁（或轻量标记）、查询数据库、重置逻辑过期时间、写入缓存、释放锁。
  - 未命中→可走与互斥锁类似的回填逻辑。
- 方案对比与建议（原图11抽取）：
  - 实现复杂度：逻辑过期高（需维护逻辑时间）；物理过期低（依赖 Redis TTL）。
  - 数据一致性：逻辑过期为最终一致；物理过期偏强一致。
  - 性能影响：逻辑过期异步更新不影响主流程；物理过期在穿透时影响明显。
  - 内存占用：逻辑过期需额外字段；物理过期仅存业务数据。
  - 适用场景：逻辑过期适合高并发读；物理过期适合常规业务。
  - 建议：在“高可用”前提下优先逻辑过期（可服务旧数据保障可用性），叠加限流与熔断；对一致性要求极高的关键路径仍可保留物理过期与短 TTL 方案。

## 第四题：嵌入式智能化操作系统（选做题）
### 题目背景
- 某公司希望在嵌入式系统中融合 AI，但对如何落地存在困惑。
- 任务：
  - 定义智能化操作系统，并给出 5 个以上智能化功能。
  - 匹配哪些场景是 AI for OS（AI 支撑操作系统），哪些是 OS for AI（操作系统支撑 AI）。

### 参考答案
- 智能化操作系统定义：在传统 OS 的资源管理与服务基础上，融合学习/推理能力，提供智能调度、智能交互与自适应优化，使系统在动态环境下保持更高的性能、可靠性与易用性。
- 智能化功能示例（≥5）：
  - 智能调度（基于 AI 的调度优化）
  - 智能化 UI 交互（语音、手势、个性化界面）
  - 自适应能耗管理（能效优化与资源弹性）
  - 智能告警与自愈（异常检测、自动化恢复）
  - 数据驱动的网络与缓存策略（更有效的数据流动）
  - 云-边缘协同（任务分层、近端推理）
  - 虚拟资源与统一抽象（跨硬件的异构抽象）
- 场景归类：
  - AI for OS：AI 算法增强 OS 能力，如智能调度、能效优化、异常检测与自愈、智能安全策略。
  - OS for AI：OS 为 AI 提供支撑，如异构加速管理、内存/IO 管理优化、实时任务调度、驱动与容器编排以支持更快推理与更好资源隔离。